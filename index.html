<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="IDES Data Preparation - Java : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>IDES Data Preparation - Java</title>
    
    <script>
  	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  	ga('create', 'UA-8154638-4', 'auto');
  	ga('send', 'pageview');

	</script>

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/IRSgov/IDES-Data-Preparation-Java">View on GitHub</a>

          <h1 id="project_title">IDES Data Preparation - Java</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/IRSgov/IDES-Data-Preparation-Java/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/IRSgov/IDES-Data-Preparation-Java/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="ides-data-preparation" class="anchor" href="#ides-data-preparation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>IDES Data Preparation</h2>

<p>The International Data Exchange Service (IDES) is a secure managed file transfer service that allows financial institutions and tax authorities to securely send information on financial accounts held by U.S. taxpayers in accordance with the Foreign Account Tax Compliance Act (FATCA). Files transmitted via IDES must be encrypted and packaged in accordance with published data preparation instructions.  The data preparation process is an important step to ensure that information transmitted via IDES conforms to U.S security standards to safeguard sensitive information.</p>

<p>The IDES Data Preparation Java project repository demonstrates a sample working application built using Java inside of <a href="http://www.eclipse.org/">Eclipse</a>.  An application was also developed using .Net, see <a href="http://irsgov.github.io/IDES-Data-Preparation-Dot-Net">IDES Data Preparation .Net</a> for more information.</p>

<p>The example explains how to use the code to develop an application that will create an IDES data packet and decrypt notifications. The project starts with a validated FATCA XML file. The application does not validate the XML or metadata schemas. The sample application will digitally sign, encrypt, compress, and archive the data packet into a compliant .ZIP format.  </p>

<p>Please note that there are many open market tools that produce the same results; however, the IRS does not endorse any commercial products, including the frameworks used in the example.  </p>

<h3>
<a id="application-setup" class="anchor" href="#application-setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Application Setup</h3>

<p>The sample application was created using Eclipse 4.5.1 and JRE version 1.8.0_65. </p>

<p>This repository includes a .zip file that contains several files necessary to this sample application. While some files can be copied and pasted from this guide, some must be downloaded from the .zip file and placed as indicated by the guide.</p>

<p>Keystore - This folder contains a set of .jks files containing self-signed test public and private keys used by the application.</p>

<p>Certs - This folder contains a few certificates in .crt format that are used by the test Config files.</p>

<p>lib - This folder contains the log4j-1.2.16.jar file which provides the console logging for the application.</p>

<p>generated - This folder has a set of .java files related to the metadata used by the application.</p>

<p>src - This folder has the main set of .java files, including testmain.java which is used to start the application.</p>

<p>Sample.000000.00000.TA.124_Payload.xml - This is the FATCA XML that will be signed, encrypted, and packaged by the application. This is a test file for the application and is not intended to portray a specific business case.</p>

<h3>
<a id="create-a-new-project" class="anchor" href="#create-a-new-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create a New Project</h3>

<p>Open <strong>Eclipse</strong>, select <strong>New</strong>, select <strong>Java Project</strong>. </p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image1.png" alt="Image 1"><br>
Figure 1   </p>

<p>Enter <strong>IDESDataPreparation</strong> for the Project Name and select the JRE that you will use. The sample is using jre1.8.0_65. Click the <strong>Next</strong> button.</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image2.png" alt="Image 2"><br>
Figure 2     </p>

<p>Click <strong>Finish</strong>, these will be set up later</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image3.png" alt="Image 3"><br>
Figure 3</p>

<p>The Eclipse project with the default settings:
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image4.png" alt="Image 4"><br>
Figure 4</p>

<p>The file system for the new project:
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image5.png" alt="Image 5"><br>
Figure 5</p>

<h2>
<a id="generated-folder" class="anchor" href="#generated-folder" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>generated folder</h2>

<p>Add the generated folder from the .zip repository into the IDESDataPreparation folder. 
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image6.png" alt="Image 6"><br>
Figure 6</p>

<h2>
<a id="keystore" class="anchor" href="#keystore" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Keystore</h2>

<p>Place the Keystore folder from the repository .zip file into the IDESDataPreparation folder. This will contain the test keys that the program will use. </p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image7.png" alt="Image 7"><br>
Figure 7  </p>

<h2>
<a id="certs" class="anchor" href="#certs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Certs</h2>

<p>Place the Certs folder from the repository .zip file into the IDESDataPreparation folder. This will contain the test certificates in .crt format that the program will use. </p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image71.png" alt="Image 7-1"><br>
Figure 7-1  </p>

<h2>
<a id="lib-folder" class="anchor" href="#lib-folder" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>lib folder</h2>

<p>Place the lib folder from the repository .zip file into the IDESDataPreparation folder. This will contain the .jar file for the console logging functionality.</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image8.png" alt="Image 8"><br>
Figure 8  </p>

<h2>
<a id="src-folder" class="anchor" href="#src-folder" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>src folder</h2>

<p>Add the src folder from the .zip repository into the IDESDataPreparation folder. 
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image9.png" alt="Image 9"><br>
Figure 9</p>

<h2>
<a id="test-payload-file" class="anchor" href="#test-payload-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test Payload file</h2>

<p>Place the test Payload files from the repository .zip file into the root of the IDESDataPreparation folder. This is the FATCA Payload file that will be signed, encrypted, and packaged for transmission through IDES. Samples also exist for non-XML transfers.</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image10.png" alt="Image 10"><br>
Figure 10  </p>

<h2>
<a id="test-configuration-files" class="anchor" href="#test-configuration-files" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test Configuration files</h2>

<p>Place the sample Config files from the repository .zip file into the root of the IDESDataPreparation folder. These are sample configuration files that can be used to run the application with various settings.</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image101.png" alt="Image 10-1"><br>
Figure 10-1  </p>

<h2>
<a id="log4jxml-file" class="anchor" href="#log4jxml-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>log4j.xml file</h2>

<p>Place the log4j.xml file from the repository .zip file into the root of the IDESDataPreparation/bin folder. This is the settings file for the console logging .jar.</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image11.png" alt="Image 11"><br>
Figure 11  </p>

<h2>
<a id="project-contents" class="anchor" href="#project-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Project Contents</h2>

<p>Refreshing the contents of the project will show the newly added folders and files:
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image12.png" alt="Image 12"><br>
Figure 12  </p>

<h2>
<a id="project-properties" class="anchor" href="#project-properties" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Project Properties</h2>

<p>Enter the Project Properties screen and enter the Java Build Path selection:
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image13.png" alt="Image 13"><br>
Figure 13  </p>

<p>Add the <strong>generated</strong> folder to the <strong>Source</strong> tab and click OK
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image14.png" alt="Image 14"><br>
Figure 14  </p>

<p>Updated <strong>Source</strong> tab
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image15.png" alt="Image 15"><br>
Figure 15  </p>

<p>Select the <strong>Libraries</strong> tab
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image16.png" alt="Image 16"><br>
Figure 16  </p>

<p>Select the <strong>Add JARs</strong> button and browse to the log4j-1.2.16.jar file in the lib folder and click the OK button to add:
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image17.png" alt="Image 17"><br>
Figure 17</p>

<p>Updated <strong>Libraries</strong> tab
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image18.png" alt="Image 18"><br>
Figure 18  </p>

<p><strong>Running The Application</strong>
Open the FATCADataPrepPETestTool.java file located in the src\fatca\ folder and start the application. The Console tab will display the logging information from the program. This file will use the ConfigAndCmdsPackSample.txt file by default and has various settings for keys, model types, and non-XML testing as well as unpackaging notifications. This Config file can be replaced or modified as needed to test different scenarios. There are additional example Config files included in the repository.</p>

<p><img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image19.png" alt="Image 19"><br>
Figure 19 </p>

<p>The output files will be placed in the root of the IDESDataPreparation folder:
<img src="http://irsgov.github.io/IDES-Data-Preparation-Java/images/image20.png" alt="Image 20"><br>
Figure 20 </p>

<h3>
<a id="disclaimer" class="anchor" href="#disclaimer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Disclaimer:</h3>

<p>We waive copyright and related rights in the work worldwide through the CC0 1.0 Universal public domain dedication. Unless expressly stated otherwise, the person who associated a work with this deed makes no warranties about the work, and disclaims liability for all uses of the work, to the fullest extent permitted by applicable law. When using or citing the work, you should not imply endorsement by the author or the affirmer.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">IDES Data Preparation - Java maintained by <a href="https://github.com/IRSgov">IRSgov</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
