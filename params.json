{
  "name": "IDES Data Preparation - Java",
  "tagline": "",
  "body": "## IDES Data Preparation\r\nThe International Data Exchange Service (IDES) is a secure managed file transfer service that allows financial institutions and tax authorities to securely send information on financial accounts held by U.S. taxpayers in accordance with the Foreign Account Tax Compliance Act (FATCA). Files transmitted via IDES must be encrypted and packaged in accordance with published data preparation instructions.  The data preparation process is an important step to ensure that information transmitted via IDES conforms to U.S security standards to safeguard sensitive information.\r\n\r\nThe IDES Data Preparation Java project repository demonstrates a sample working application built using Java inside of [Eclipse](http://www.eclipse.org/).  An application was also developed using .Net, see [IDES Data Preparation .Net]  (http://irsgov.github.io/IDES-Data-Preparation-Dot-Net) for more information.\r\n\r\nThe example explains how to use the code to develop an application that will create an IDES data packet and decrypt notifications. The project starts with a validated FATCA XML file. The application does not validate the XML or metadata schemas. The sample application will digitally sign, encrypt, compress, and archive the data packet into a compliant .ZIP format.  \r\n\r\nPlease note that there are many open market tools that produce the same results; however, the IRS does not endorse any commercial products, including the frameworks used in the example.  \r\n\r\n### Application Setup\r\n\r\nThe sample application was created using Eclipse 4.5.1 and JRE version 1.8.0_65. \r\n\r\nThis repository includes a .zip file that contains several files necessary to this sample application. While some files can be copied and pasted from this guide, some must be downloaded from the .zip file and placed as indicated by the guide.\r\n\r\nKeystore - This folder contains a set of .jks files containing self-signed test public and private keys used by the application.\r\n\r\nCerts - This folder contains a few certificates in .crt format that are used by the test Config files.\r\n\r\nlib - This folder contains the log4j-1.2.16.jar file which provides the console logging for the application.\r\n\r\ngenerated - This folder has a set of .java files related to the metadata used by the application.\r\n\r\nsrc - This folder has the main set of .java files, including testmain.java which is used to start the application.\r\n\r\nSample.000000.00000.TA.124_Payload.xml - This is the FATCA XML that will be signed, encrypted, and packaged by the application. This is a test file for the application and is not intended to portray a specific business case.\r\n\r\n### Create a New Project  \r\n\r\nOpen **Eclipse**, select **New**, select **Java Project**. \r\n\r\n![Image 1](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image1.png)  \r\nFigure 1   \r\n \r\nEnter **IDESDataPreparation** for the Project Name and select the JRE that you will use. The sample is using jre1.8.0_65. Click the **Next** button.\r\n\r\n![Image 2](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image2.png)  \r\nFigure 2     \r\n\r\nClick **Finish**, these will be set up later\r\n\r\n![Image 3](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image3.png)  \r\nFigure 3\r\n\r\nThe Eclipse project with the default settings:\r\n![Image 4](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image4.png)  \r\nFigure 4\r\n\r\nThe file system for the new project:\r\n![Image 5](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image5.png)  \r\nFigure 5\r\n\r\n##generated folder\r\nAdd the generated folder from the .zip repository into the IDESDataPreparation folder. \r\n![Image 6](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image6.png)  \r\nFigure 6\r\n\r\n##Keystore\r\nPlace the Keystore folder from the repository .zip file into the IDESDataPreparation folder. This will contain the test keys that the program will use. \r\n\r\n![Image 7](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image7.png)  \r\nFigure 7  \r\n\r\n##Certs\r\nPlace the Certs folder from the repository .zip file into the IDESDataPreparation folder. This will contain the test certificates in .crt format that the program will use. \r\n\r\n![Image 7-1](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image71.png)  \r\nFigure 7-1  \r\n\r\n\r\n##lib folder\r\nPlace the lib folder from the repository .zip file into the IDESDataPreparation folder. This will contain the .jar file for the console logging functionality.\r\n\r\n![Image 8](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image8.png)  \r\nFigure 8  \r\n\r\n\r\n##src folder\r\nAdd the src folder from the .zip repository into the IDESDataPreparation folder. \r\n![Image 9](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image9.png)  \r\nFigure 9\r\n\r\n\r\n##Test Payload file\r\nPlace the test Payload files from the repository .zip file into the root of the IDESDataPreparation folder. This is the FATCA Payload file that will be signed, encrypted, and packaged for transmission through IDES. Samples also exist for non-XML transfers.\r\n\r\n![Image 10](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image10.png)  \r\nFigure 10  \r\n\r\n##Test Configuration files\r\nPlace the sample Config files from the repository .zip file into the root of the IDESDataPreparation folder. These are sample configuration files that can be used to run the application with various settings.\r\n\r\n![Image 10-1](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image101.png)  \r\nFigure 10-1  \r\n\r\n##log4j.xml file\r\nPlace the log4j.xml file from the repository .zip file into the root of the IDESDataPreparation/bin folder. This is the settings file for the console logging .jar.\r\n\r\n![Image 11](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image11.png)  \r\nFigure 11  \r\n\r\n##Project Contents\r\n\r\nRefreshing the contents of the project will show the newly added folders and files:\r\n![Image 12](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image12.png)  \r\nFigure 12  \r\n\r\n##Project Properties\r\n\r\nEnter the Project Properties screen and enter the Java Build Path selection:\r\n![Image 13](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image13.png)  \r\nFigure 13  \r\n\r\nAdd the **generated** folder to the **Source** tab and click OK\r\n![Image 14](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image14.png)  \r\nFigure 14  \r\n\r\nUpdated **Source** tab\r\n![Image 15](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image15.png)  \r\nFigure 15  \r\n\r\nSelect the **Libraries** tab\r\n![Image 16](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image16.png)  \r\nFigure 16  \r\n\r\nSelect the **Add JARs** button and browse to the log4j-1.2.16.jar file in the lib folder and click the OK button to add:\r\n![Image 17](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image17.png)  \r\nFigure 17\r\n\r\nUpdated **Libraries** tab\r\n![Image 18](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image18.png)  \r\nFigure 18  \r\n\r\n##Run Configuration\r\nSelect the Run -> Run Configurations  -> Java Application (from left panel) -> FATCADataPrepPETestTool (or the one created with another name) -> Arguments tab (from right panel tabs) -> VM Arguments (text box) and type -Dfile.encoding=UTF8 and click the Apply button.\r\n![Image 19](http://irsgov.github.io/IDES-Data-Preparation-Java/images/run_config.png)  \r\nFigure 19\r\n\r\n##Running The Application\r\nOpen the FATCADataPrepPETestTool.java file located in the src\\fatca\\ folder and start the application. The Console tab will display the logging information from the program. This file will use the ConfigAndCmdsPackSample.txt file by default and has various settings for keys, model types, and non-XML testing as well as unpackaging notifications. This Config file can be replaced or modified as needed to test different scenarios. There are additional example Config files included in the repository.\r\n\r\n![Image 20](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image19.png)  \r\nFigure 20 \r\n\r\nThe output files will be placed in the root of the IDESDataPreparation folder:\r\n![Image 21](http://irsgov.github.io/IDES-Data-Preparation-Java/images/image20.png)  \r\nFigure 21 \r\n\r\n\r\n\r\n### Disclaimer:\r\nWe waive copyright and related rights in the work worldwide through the CC0 1.0 Universal public domain dedication. Unless expressly stated otherwise, the person who associated a work with this deed makes no warranties about the work, and disclaims liability for all uses of the work, to the fullest extent permitted by applicable law. When using or citing the work, you should not imply endorsement by the author or the affirmer.\r\n\r\n",
  "google": "",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}